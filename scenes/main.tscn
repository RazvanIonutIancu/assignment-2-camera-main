[gd_scene load_steps=5 format=3 uid="uid://cy3lusgqp52v8"]

[ext_resource type="PackedScene" uid="uid://d1ai6s6p8dvag" path="res://scenes/map.tscn" id="1_o5qli"]
[ext_resource type="PackedScene" uid="uid://ct32ppmfue4v1" path="res://scenes/player.tscn" id="2_0wfyh"]
[ext_resource type="PackedScene" uid="uid://bxeo4k8dptovg" path="res://scenes/camera.tscn" id="3_sugp2"]
[ext_resource type="PackedScene" uid="uid://m1bh13e6nttw" path="res://scenes/npc.tscn" id="4_jyhfs"]

[node name="Main" type="Node"]

[node name="Map" parent="." instance=ExtResource("1_o5qli")]

[node name="Player" parent="." node_paths=PackedStringArray("camera") instance=ExtResource("2_0wfyh")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)
collision_mask = 7
camera = NodePath("../Camera")

[node name="Body" parent="Player" index="0"]
visible = true

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(0.5548444, -0.6839861, 0.47361442, 0, 0.5692795, 0.82214403, -0.831954, -0.45616204, 0.31586155, 4.487, 454.479, 400)
shadow_enabled = true

[node name="Camera" parent="." node_paths=PackedStringArray("CameraOffset", "Player", "player", "NPC", "CameraPosition", "LeftRay1", "LeftRay2", "LeftRay3", "CameraRay", "RightRay1", "RightRay2", "RightRay3") instance=ExtResource("3_sugp2")]
CameraOffset = NodePath("Yaw/Offset")
Player = NodePath("../Player")
player = NodePath("../Player")
NPC = NodePath("../NPC")
CameraPosition = NodePath(".")
LeftRay1 = NodePath("Yaw/Offset/Tilt/LeftRay1")
LeftRay2 = NodePath("Yaw/Offset/Tilt/LeftRay2")
LeftRay3 = NodePath("Yaw/Offset/Tilt/LeftRay3")
CameraRay = NodePath("Yaw/Offset/Tilt/CameraRay")
RightRay1 = NodePath("Yaw/Offset/Tilt/RightRay1")
RightRay2 = NodePath("Yaw/Offset/Tilt/RightRay2")
RightRay3 = NodePath("Yaw/Offset/Tilt/RightRay3")

[node name="Tilt" parent="Camera/Yaw/Offset" index="0"]
transform = Transform3D(1, 0, 0, 0, 0.8660254, 0.5, 0, -0.5, 0.8660254, 0, 0, 0)

[node name="Zoom" parent="Camera/Yaw/Offset/Tilt" index="0"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 15)

[node name="LeftRay1" parent="Camera/Yaw/Offset/Tilt" index="1"]
collision_mask = 8

[node name="NPC" parent="." instance=ExtResource("4_jyhfs")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, -19)
collision_layer = 4

[node name="Area3D" parent="NPC" index="2"]
collision_layer = 2

[connection signal="body_entered" from="NPC/Area3D" to="Player" method="OnBodyEntered"]
[connection signal="body_exited" from="NPC/Area3D" to="Player" method="OnBodyExited"]

[editable path="Player"]
[editable path="Camera"]
[editable path="NPC"]
